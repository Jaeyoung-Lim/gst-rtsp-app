{
  "elements": {
    "TestSource": "videotestsrc",
    "TestSink": "aasink",

    "MainSource": "v4l2src",
    "MainRate": "videorate",
    "MainScale": "videoscale",
    "MainFilter": "capsfilter",
    "MainTee": "tee",

    "ViewRate": "videorate",
    "ViewScale": "videoscale",
    "ViewConv": "videoconvert",
    "ViewFilter": "capsfilter",
    "ViewSink": "xvimagesink",

    "WebRate": "videorate",
    "WebScale": "videoscale",
    "WebConv": "videoconvert",
    "WebFilter": "capsfilter",
    "WebEnc": "theoraenc",
    "WebMux": "oggmux",
    "WebSink": "tcpserversink",

    "Rate0": "videorate",
    "Scale0": "videoscale",
    "Filter0": "capsfilter",
    "Conv0": "vaapipostproc",
    "Enc0": "vaapih264enc",
    "Parse0": "h264parse",
    "Pay0": "rtph264pay",

    "Rate1": "videorate",
    "Scale1": "videoscale",
    "Conv1": "videoconvert",
    "Filter1": "capsfilter",
    "Enc1": "theoraenc",
    "Pay1": "rtptheorapay"

  },

  "filters": {
    "MainCaps": "video/x-raw,width=(int)2448,height=(int)2048,framerate=(fraction)15/1",
    "ViewCaps": "video/x-raw, width=(int)1224, height=(int)1024, framerate=(fraction)15/1",
    "WebCaps": "video/x-raw,width=(int)512,height=(int)384,framerate=(fraction)25/2,pixel-aspect-ratio=(fraction)1/1, interlace-mode=(string)progressive",
    "Caps0": "video/x-raw,width=(int)2448,height=(int)2048,framerate=(fraction)15/1,pixel-aspect-ratio=(fraction)1/1, interlace-mode=(string)progressive",
    "Caps1": "video/x-raw,width=(int)640,height=(int)480,framerate=(fraction)25/2,pixel-aspect-ratio=(fraction)1/1, interlace-mode=(string)progressive"
  },

  "pipes": {
    "TestPipe": ["TestSource", "TestSink"],

    "MainPipe": ["MainSource", "MainRate", "MainScale", "MainFilter", "MainTee"],
    "ViewPipe": ["ViewRate", "ViewScale", "ViewConv", "ViewFilter", "ViewSink"],
    "WebPipe": ["WebRate", "WebScale", "WebConv", "WebFilter", "WebEnc", "WebMux", "WebSink"],

    "h264": ["Rate0", "Scale0", "Filter0", "Conv0", "Enc0", "Parse0", "Pay0"],
    "theora": ["Rate1", "Scale1", "Conv1", "Filter1", "Enc1", "Pay1"]
  },

  "rtsp": ["theora", "h264"],

  "links": [
    {"src": "TestSource", "dst": "TestSink"},

    {"src": "MainSource", "dst": "MainRate"},
    {"src": "MainRate", "dst": "MainScale"},
    {"src": "MainScale", "dst": "MainFilter"},
    {"src": "MainFilter", "dst": "MainTee"},


    {"src": "ViewRate",  "dst": "ViewScale"},
    {"src": "ViewScale", "dst": "ViewConv"},
    {"src": "ViewConv", "dst": "ViewFilter"},
    {"src": "ViewFilter", "dst": "ViewSink"},

    {"src": "WebRate",  "dst": "WebScale"},
    {"src": "WebScale", "dst": "WebConv"},
    {"src": "WebConv", "dst": "WebFilter"},
    {"src": "WebFilter", "dst": "WebEnc"},
    {"src": "WebEnc", "dst": "WebMux"},
    {"src": "WebMux", "dst": "WebSink"},

    {"src": "Rate0",  "dst": "Scale0"},
    {"src": "Scale0", "dst": "Filter0"},
    {"src": "Filter0", "dst": "Conv0"},
    {"src": "Conv0", "dst": "Enc0"},
    {"src": "Enc0", "dst": "Parse0"},
    {"src": "Parse0", "dst": "Pay0"},

    {"src": "Rate1",  "dst": "Scale1"},
    {"src": "Scale1", "dst": "Conv1"},
    {"src": "Conv1", "dst": "Filter1"},
    {"src": "Filter1", "dst": "Enc1"},
    {"src": "Enc1",  "dst": "Pay1"}
  ],

  "connections": {
    "ViewPipe": {
      "first_elem": "ViewRate",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    },
    "WebPipe": {
      "first_elem": "WebRate",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    },
    "h264": {
      "first_elem": "Rate0",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    },
    "theora": {
      "first_elem": "Rate1",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    }
  }
}
