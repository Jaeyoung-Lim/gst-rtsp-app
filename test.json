{
  "elements": {
    "TestSource": "videotestsrc",
    "TestSink": "aasink",

    "MainSource": "v4l2src",
    "MainScale": "videoscale",
    "MainFilter": "capsfilter",
    "MainTee": "tee",

    "ViewQueue": "queue",
    "ViewConv": "videoconvert",
    "ViewSink": "xvimagesink",

    "RtspQueue0": "queue",
    "RtspConv0": "videoconvert",
    "RtspEnc0": "theoraenc",
    "pay0": "rtptheorapay",

    "RtspQueue1": "queue",
    "RtspConv1": "videoconvert",
    "RtspEnc1": "x264enc",
    "pay1": "rtph264pay"

  },

  "filters": {
    "MainCaps": "video/x-raw, width=(int)640, height=(int)480, framerate=(fraction)15/1"
  },

  "pipes": {
    "TestPipe": ["TestSource", "TestSink"],

    "MainPipe": ["MainSource", "MainScale", "MainFilter", "MainTee",
                 "ViewQueue", "ViewConv", "ViewSink", "RtspQueue0", "RtspQueue1"],
    "theora": ["RtspConv0", "RtspEnc0", "pay0"],
    "h264": ["RtspConv1", "RtspEnc1", "pay1"]
  },

  "rtsp": ["theora", "h264"],

  "links": [
    {"src": "TestSource", "dst": "TestSink"},

    {"src": "MainSource", "dst": "MainScale"},
    {"src": "MainScale", "dst": "MainFilter"},
    {"src": "MainFilter", "dst": "MainTee"},

    {"src": "MainTee", "dst": "ViewQueue"},
    {"src": "MainTee", "dst": "RtspQueue0"},
    {"src": "MainTee", "dst": "RtspQueue1"},

    {"src": "ViewQueue", "dst": "ViewConv"},
    {"src": "ViewConv", "dst": "ViewSink"},

    {"src": "RtspConv0", "dst": "RtspEnc0"},
    {"src": "RtspEnc0", "dst": "pay0"},

    {"src": "RtspConv1", "dst": "RtspEnc1"},
    {"src": "RtspEnc1", "dst": "pay1"}
  ],

  "connections": {
    "theora": {
      "first_elem": "RtspConv0",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    },
    "h264": {
      "first_elem": "RtspConv1",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    }
  }
}