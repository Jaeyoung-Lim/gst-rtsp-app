{
  "elements": {
    "TestSource": "videotestsrc",
    "TestSink": "aasink",

    "MainSource": "ctsrc",
    "MainRate": "videorate",
    "MainScale": "videoscale",
    "MainFilter": "capsfilter",
    "MainTee": "tee",

    "ViewRate": "videorate",
    "ViewScale": "videoscale",
    "ViewConv": "videoconvert",
    "ViewFilter": "capsfilter",
    "ViewSink": "xvimagesink",

    "WebRate": "videorate",
    "WebScale": "videoscale",
    "WebConv": "videoconvert",
    "WebFilter": "capsfilter",
    "WebEnc": "theoraenc",
    "WebMux": "oggmux",
    "WebSink": "tcpserversink",

    "Rate0": "videorate",
    "Scale0": "videoscale",
    "Conv0": "videoconvert",
    "Filter0": "capsfilter",
    "Post0": "vaapipostproc",
    "Enc0": "vaapih264enc",
    "Parse0": "h264parse",
    "Pay0": "rtph264pay",

    "Rate1": "videorate",
    "Scale1": "videoscale",
    "Conv1": "videoconvert",
    "Filter1": "capsfilter",
    "Post1": "vaapipostproc",
    "Enc1": "vaapih265enc",
    "Parse1": "h265parse",
    "Pay1": "rtph265pay",

    "V4l2Src": "v4l2src",
    "Conv2": "videoconvert",
    "Filter2": "capsfilter",
    "Post2": "vaapipostproc",
    "Enc2": "vaapih264enc",
    "Parse2": "h264parse",
    "Pay2": "rtph264pay"
  },

  "filters": {
    "MainCaps": "video/x-raw,width=(int)1920,height=(int)1080,framerate=(fraction)15/1",
    "ViewCaps": "video/x-raw,width=(int)1920,height=(int)1080,framerate=(fraction)15/1",
    "WebCaps": "video/x-raw,width=(int)640,height=(int)360,framerate=(fraction)25/2",
    "Caps0": "video/x-raw,width=(int)1920,height=(int)1080,framerate=(fraction)15/1,pixel-aspect-ratio=(fraction)1/1, interlace-mode=(string)progressive",
    "Caps1": "video/x-raw,width=(int)1920,height=(int)1080,framerate=(fraction)15/1,pixel-aspect-ratio=(fraction)1/1, interlace-mode=(string)progressive",
    "Caps2": "video/x-raw,width=(int)640,height=(int)480,framerate=(fraction)30/1"
  },

  "pipes": {
    "TestPipe": ["TestSource", "TestSink"],

    "MainPipe": ["MainSource", "MainRate", "MainScale", "MainFilter", "MainTee"],
	
    "ViewPipe": ["ViewRate", "ViewScale", "ViewConv", "ViewFilter", "ViewSink"],
	
    "WebPipe": ["WebRate", "WebScale", "WebConv", "WebFilter", "WebEnc", "WebMux", "WebSink"],

    "h264": ["Rate0", "Scale0", "Conv0", "Filter0", "Post0", "Enc0", "Parse0", "Pay0"],
    "h265": ["Rate1", "Scale1", "Conv1", "Filter1", "Post1", "Enc1", "Parse1", "Pay1"],
    "v4l2": ["V4l2Src", "Conv2", "Filter2", "Post2", "Enc2", "Parse2", "Pay2"]
  },

  "rtsp": ["v4l2", "h264", "h265"],

  "links": [
    {"src": "TestSource", "dst": "TestSink"},

    {"src": "MainSource", "dst": "MainRate"},
    {"src": "MainRate", "dst": "MainScale"},
    {"src": "MainScale", "dst": "MainFilter"},
    {"src": "MainFilter", "dst": "MainTee"},

    {"src": "ViewRate",  "dst": "ViewScale"},
    {"src": "ViewScale", "dst": "ViewConv"},
    {"src": "ViewConv", "dst": "ViewFilter"},
    {"src": "ViewFilter", "dst": "ViewSink"},

    {"src": "WebRate",  "dst": "WebScale"},
    {"src": "WebScale", "dst": "WebConv"},
    {"src": "WebConv", "dst": "WebFilter"},
    {"src": "WebFilter", "dst": "WebEnc"},
    {"src": "WebEnc", "dst": "WebMux"},
    {"src": "WebMux", "dst": "WebSink"},

    {"src": "Rate0",  "dst": "Scale0"},
    {"src": "Scale0", "dst": "Conv0"},
    {"src": "Conv0", "dst": "Filter0"},
    {"src": "Filter0", "dst": "Post0"},
    {"src": "Post0",  "dst": "Enc0"},
    {"src": "Enc0", "dst": "Parse0"},
    {"src": "Parse0", "dst": "Pay0"},

    {"src": "Rate1",  "dst": "Scale1"},
    {"src": "Scale1", "dst": "Conv1"},
    {"src": "Conv1", "dst": "Filter1"},
    {"src": "Filter1", "dst": "Post1"},
    {"src": "Post1",  "dst": "Enc1"},
    {"src": "Enc1",  "dst": "Parse1"},
    {"src": "Parse1", "dst": "Pay1"},

    {"src": "V4l2Src", "dst": "Conv2"},
    {"src": "Conv2", "dst": "Filter2"},
    {"src": "Filter2", "dst": "Post2"},
    {"src": "Post2",  "dst": "Enc2"},
    {"src": "Enc2",  "dst": "Parse2"},
    {"src": "Parse2", "dst": "Pay2"}
	
  ],

  "connections": {
    "ViewPipe": {
      "first_elem": "ViewRate",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    },
    "WebPipe": {
      "first_elem": "WebRate",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    },
    "h264": {
      "first_elem": "Rate0",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    },
    "h265": {
      "first_elem": "Rate1",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    }
  }
}
