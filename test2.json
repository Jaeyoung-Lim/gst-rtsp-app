{
  "elements": {
    "TestSource": "videotestsrc",
    "TestSink": "aasink",

    "MainSource": "videotestsrc",
    "MainScale": "videoscale",
    "MainFilter": "capsfilter",
    "MainTee": "tee",

    "ViewQueue": "queue",
    "ViewConv": "videoconvert",
    "ViewSink": "xvimagesink",

    "RtspQueue0": "queue",
    "RtspConv0": "videoconvert",
    "RtspEnc0": "theoraenc",
    "pay0": "rtptheorapay",

    "RtspQueue1": "queue",
    "RtspConv1": "vaapipostproc",
    "RtspEnc1": "vaapih264enc",
    "pay1": "rtph264pay"

  },

  "pipes": {
    "TestPipe": ["TestSource", "TestSink"],

    "MainPipe": ["MainSource", "MainScale", "MainFilter", "MainTee"],

    "ViewPipe": ["ViewQueue", "ViewConv", "ViewSink"],
    "theora": ["RtspQueue0", "RtspConv0", "RtspEnc0", "pay0"],
    "h264": ["RtspQueue1", "RtspConv1", "RtspEnc1", "pay1"]
  },

  "rtsp": ["theora", "h264"],

  "links": [
    {"src": "TestSource", "dst": "TestSink"},

    {"src": "MainSource", "dst": "MainScale"},
    {"src": "MainScale", "dst": "MainFilter"},
    {"src": "MainFilter", "dst": "MainTee"},

    {"src": "ViewQueue", "dst": "ViewConv"},
    {"src": "ViewConv", "dst": "ViewSink"},

    {"src": "RtspQueue0", "dst": "RtspConv0"},
    {"src": "RtspConv0", "dst": "RtspEnc0"},
    {"src": "RtspEnc0", "dst": "pay0"},

    {"src": "RtspQueue1", "dst": "RtspConv1"},
    {"src": "RtspConv1", "dst": "RtspEnc1"},
    {"src": "RtspEnc1", "dst": "pay1"}
  ],

  "connections": {
    "ViewPipe": {
      "first_elem": "ViewQueue",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    },
    "theora": {
      "first_elem": "RtspQueue0",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    },
    "h264": {
      "first_elem": "RtspQueue1",
      "src_pipe": "MainPipe",
      "src_last_elem": "MainTee"
    }
  }
}